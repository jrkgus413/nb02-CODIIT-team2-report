# CODIIT-backend 프로젝트 개발 보고서

> **프로젝트명**: CODI-IT
> 
> **프로젝트 기간** : 2025. 09. 15 ~ 2025. 11. 03
> 
> **팀명** : 2팀
> 
> **작성자** : 조가현

## 1. 개요

본 프로젝트는 패션/쇼핑몰 플랫폼의 백엔드 서비스를 구현하기 위해 **NestJS**와 **Prisma ORM**을 기반으로 개발되었습니다.  
주요 기능은 **문의(Question)/답변(Answer) 관리**와 **리뷰(Review) 관리**이며, 사용자 인증 및 권한 체크, 데이터 유효성 검증, 예외 처리, 유닛 테스트 등 실무에서 요구되는 다양한 백엔드 기술을 적용했습니다.

프로젝트 목표는 **모듈화, 안정성, 유지보수성, 테스트 가능성**을 고려한 백엔드 아키텍처 구현입니다.

---

## 2. 요구사항 및 기획

- 사용자 문의/답변 및 리뷰 기능 제공
- 문의는 상품별 등록, 답변은 판매자만 작성 가능
- 문의/답변/리뷰 모두 작성자만 수정·삭제 가능, 권한 체크 필수
- 데이터 유효성 검증 및 예외 처리 (리소스 없음, 권한 없음 등)
- 서비스 안정성을 위한 유닛 테스트 및 예외 케이스 검증

---

## 3. 구현 내용

### 3.1 문의/답변 관리

- **문의**

  - 목록/상세 조회, 작성, 수정, 삭제 기능 구현
  - 답변이 달린 문의는 수정 불가하도록 예외 처리

- **답변**

  - 해당 상품 판매자만 작성 가능
  - 답변 등록 시 문의 상태 자동 변경 (답변 완료/대기)
  - 답변 수정/삭제는 작성자만 가능

- **권한 및 예외 처리**
  - `NotFoundException`, `UnauthorizedException`, `ConflictException` 등 NestJS 예외 클래스를 활용
  - 모든 API에서 권한 체크와 리소스 존재 여부 검증

### 3.2 리뷰 관리

- **작성 조건**

  - 상품 구매자만 작성 가능, 동일 상품 중복 리뷰 불가

- **CRUD 기능**

  - 목록 조회(페이지네이션), 단건 조회, 작성, 수정, 삭제
  - 수정/삭제는 작성자만 가능

- **데이터 검증**
  - `class-validator`를 활용하여 평점, 내용 등 입력값 유효성 검사

### 3.3 테스트 코드 작성

- Jest 기반 서비스 및 컨트롤러 단위 테스트 작성
- **정상 케이스**와 **실패 케이스**를 구분하여 검증
- Guard, Pipe 등 요청 전 처리 단계의 에러 처리까지 포함
- Mock 객체로 DB 의존성 제거, 다양한 예외 상황 테스트

---

## 4. 기술적 특징 및 학습 포인트

- **NestJS 모듈화 구조**

  - Controller, Service, Repository 분리로 역할 명확화
  - 유지보수성과 확장성 향상

- **Prisma ORM 활용**

  - 트랜잭션 처리, 관계형 데이터 조회, select 옵션 활용

- **권한 및 예외 처리 일관성**

  - 모든 API에서 일관된 예외 처리와 권한 체크 적용

- **테스트 코드로 신뢰성 확보**
  - 정상/실패 케이스 모두 검증, 테스트 커버리지 향상

### 학습한 주요 내용

- NestJS의 Guard, Pipe, Interceptor 구조 이해
- Prisma ORM의 트랜잭션과 관계형 데이터 조회 활용법 습득
- 유닛 테스트에서 실패 케이스 설계의 중요성 체감
- 실무 수준의 예외 처리 및 권한 체크 필요성 경험

---

## 5. 트러블슈팅 경험: 유닛 테스트 설계

**문제점**

- 초기에는 정상 케이스 중심으로 테스트 작성, Guard/ Pipe 단계에서 발생하는 오류 미검증

**원인 분석**

- NestJS는 요청 전후 단계별 훅 제공
- 실패 케이스 테스트 부족으로 예상치 못한 에러 발견 어려움

**해결 방법**

- 정상/실패 케이스를 명확히 구분
- 인증 실패, 파라미터 유효성 실패, 내부 로직 에러 등 포함
- Guard, Pipe 등 요청 전 처리 단계까지 유닛 테스트 적용

**결과 및 배운 점**

- 다양한 실패 케이스 테스트로 조기 에러 발견 가능
- 테스트 커버리지 및 서비스 안정성 향상
- NestJS 구조 이해가 테스트 설계 명확화에 도움

---

## 6. 아쉬운 점 및 개선 방향

- 일부 복잡한 권한 로직 테스트 커버리지 부족
- 권한 체크 코드 중복 개선 필요
- API 응답 포맷 및 에러 메시지 표준화 필요
- 테스트 자동화 및 CI/CD 환경 구축으로 개발 효율성 향상 가능

---

## 7. 결론

CODIIT-backend 프로젝트를 통해 **모듈화 설계, ORM 활용, 인증/권한, 예외 처리, 유닛 테스트** 등 백엔드 실무 기술을 종합적으로 경험했습니다.  
향후 실제 서비스 환경에서도 안정적 운영을 목표로 지속적인 개선과 리팩토링을 진행할 계획입니다.
